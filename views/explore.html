<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../assets/css/explore.css">
    <link rel="stylesheet" href="../assets/css/navbar.css">
</head>

<body class="body">
    <header class="navbar">
        <div class="navbar-container container">
            <input type="checkbox" name="" id="">
            <div class="hamburger-lines">
                <span class="line line1"></span>
                <span class="line line2"></span>
                <span class="line line3"></span>
            </div>
            <ul class="menu-items">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">FAQs</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
            <h1 class="logo">Sino</h1>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Explore</h1>
            <p class="hero-description">Insect biodiversity is the variety of insect species.</p>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="predator">Predator</button>
                <button class="filter-btn" data-filter="decomposer">Decomposer</button>
                <button class="filter-btn" data-filter="pollinator">Pollinator</button>
            </div>
        </div>


        <!-- Boxes Section -->
        <div class="box-container">
            <div class="box predator">
                <div class="box-image">
                    <img src="../assets/uploads/bg-ladybug.png" alt="Image 1">
                </div>
                <div class="subjudul">Ladybug</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Ladybug</h2>
                            <p class="description pembatas text-box">A small, bright red beetle with black spots,
                                helpful in controlling pests.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box predator">
                <div class="box-image">
                    <img src="../assets/uploads/bg-dragonfly.png" alt="Image 2">
                </div>
                <div class="subjudul">DragonFly</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>DragonFly</h2>
                            <p class="description pembatas">A graceful insect with long wings, skilled at hunting
                                mosquitoes mid-flight.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box predator">
                <div class="box-image">
                    <img src="../assets/uploads/bg-spider.png" alt="Image 2">
                </div>
                <div class="subjudul">Spider</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Spider</h2>
                            <p class="description pembatas">A graceful insect with long wings, skilled at hunting
                                mosquitoes mid-flight.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box decomposer">
                <div class="box-image">
                    <img src="../assets/uploads/bg-springtail.png" alt="Image 3">
                </div>
                <div class="subjudul">Springtail</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Springtail</h2>
                            <p class="description pembatas">A large, hairy spider found in warm climates, known for its
                                gentle nature.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box decomposer">
                <div class="box-image">
                    <img src="../assets/uploads/bg-housefly.png" alt="Image 4">
                </div>
                <div class="subjudul">Housefly</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Housefly</h2>
                            <p class="description pembatas">An eight-legged arachnid that weaves intricate webs to catch
                                prey.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box decomposer">
                <div class="box-image">
                    <img src="../assets/uploads/bg-termite.png" alt="Image 4">
                </div>
                <div class="subjudul">Termite</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Termite</h2>
                            <p class="description pembatas">An eight-legged arachnid that weaves intricate webs to catch
                                prey.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box pollinator">
                <div class="box-image">
                    <img src="../assets/uploads/bg-honeybee.png" alt="Image 5">
                </div>
                <div class="subjudul">Honeybee</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Honeybee</h2>
                            <p class="description pembatas">Deskripsi singkat tentang topik kelima.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box pollinator">
                <div class="box-image">
                    <img src="../assets/uploads/bg-monarch-butterfly.png" alt="Image 6">
                </div>
                <div class="subjudul">Monarch Butterfly</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Monarch</h2>
                            <p class="description pembatas">Deskripsi singkat tentang topik keenam.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box pollinator">
                <div class="box-image">
                    <img src="../assets/uploads/bg-hoverfly.png" alt="Image 6">
                </div>
                <div class="subjudul">Hoverfly</div>
                <div class="box-content">
                    <div class="row">
                        <div class="coloumn">
                            <h2>Hoverfly</h2>
                            <p class="description pembatas">Deskripsi singkat tentang topik keenam.</p>
                        </div>
                        <div class="coloumn">
                            <button style="margin-left: 40px;">Explore</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chatbot -->
        <div class="chatbot-card">
            <div class="chatbot-header">
                Chatbot
                <button class="close-btn" onclick="toggleChatbot()">&times;</button>
            </div>
            <div class="chatbot-body" id="chatbotBody">
                what you want to ask?
            </div>
            <div class="chatbot-footer">
                <input type="text" id="chatbotInput" placeholder="Type your message..." />
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>

    </section>
</body>

<script>

    //Filter Category
    document.addEventListener('DOMContentLoaded', () => {
        const filterButtons = document.querySelectorAll('.filter-btn');
        const boxContainer = document.querySelector('.box-container');

        // Cek apakah ada filter yang dipilih sebelumnya di localStorage
        const lastFilter = localStorage.getItem('selectedFilter');

        // Jika tidak ada filter yang dipilih atau filter selain 'all', setel filter ke 'all'
        if (!lastFilter || lastFilter !== 'all') {
            localStorage.setItem('selectedFilter', 'all');
        }

        // Apply active class to the correct button based on the saved filter
        filterButtons.forEach(button => {
            if (button.getAttribute('data-filter') === localStorage.getItem('selectedFilter')) {
                button.classList.add('active');
            }
        });

        // Apply the correct filter to the boxes and layout change
        const filter = localStorage.getItem('selectedFilter');
        if (filter !== 'all') {
            boxContainer.classList.add('filtered');
        } else {
            boxContainer.classList.remove('filtered');
        }

        document.querySelectorAll('.box').forEach(box => {
            if (filter === 'all') {
                // Show all boxes when 'All' is selected
                box.classList.add('show');
                box.style.display = 'block';
            } else if (box.classList.contains(filter)) {
                // Only show boxes that match the selected filter
                box.classList.add('show');
                box.style.display = 'block';
            } else {
                // Hide boxes that do not match the selected filter
                box.classList.remove('show');
                box.style.display = 'none';
            }
        });

        // Add event listeners for button clicks
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                // Add active class to clicked button
                button.classList.add('active');

                // Get filter value
                const filter = button.getAttribute('data-filter');
                localStorage.setItem('selectedFilter', filter); // Store the selected filter

                // Show/Hide boxes based on filter
                document.querySelectorAll('.box').forEach(box => {
                    if (filter === 'all') {
                        box.classList.add('show');
                        box.style.display = 'block';
                    } else if (box.classList.contains(filter)) {
                        box.classList.add('show');
                        box.style.display = 'block';
                    } else {
                        box.classList.remove('show');
                        box.style.display = 'none';
                    }
                });

                // If filter is not 'all', apply flex layout to box container
                if (filter !== 'all') {
                    boxContainer.classList.add('filtered');
                } else {
                    boxContainer.classList.remove('filtered');
                }
            });
        });
    });

    //Open Chabot
    document.addEventListener('DOMContentLoaded', () => {
        const exploreButtons = document.querySelectorAll('.box button');
        const chatbotCard = document.querySelector('.chatbot-card');
        const closeButton = document.querySelector('.chatbot-header .close-btn');

        exploreButtons.forEach(button => {
            button.addEventListener('click', () => {
                chatbotCard.classList.add('show'); // Show the chatbot card
            });
        });

        closeButton.addEventListener('click', () => {
            chatbotCard.classList.remove('show'); // Hide the chatbot card
        });
    });

    //Function Send Message
    function sendMessage() {
        const inputField = document.getElementById("chatbotInput");
        const chatbotBody = document.getElementById("chatbotBody");
        const userMessage = inputField.value.trim();

        if (userMessage !== "") {
            // Create a chat bubble for user message
            const userBubble = document.createElement("div");
            userBubble.className = "chat-bubble user";
            userBubble.innerText = userMessage;
            chatbotBody.appendChild(userBubble);

            // Clear the input field
            inputField.value = "";

            // Simulate chatbot response after a short delay
            setTimeout(() => {
                const botBubble = document.createElement("div");
                botBubble.className = "chat-bubble bot";
                chatbotBody.appendChild(botBubble);

                // Generate bot response and animate it
                typeWriterEffect(botBubble, generateBotResponse(userMessage));
            }, 500);

            // Scroll to the latest message
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }
    }

    // Function to generate chatbot response
    function generateBotResponse(userMessage) {
        if (userMessage.toLowerCase().includes("hello")) {
            return "Hi there! How can I assist you today?";
        } else if (userMessage.toLowerCase().includes("bye")) {
            return "Goodbye! Have a great day!";
        } else if (userMessage.toLowerCase().includes("what is sino?")) {
            return "inspired by the Japanese movie Naruto, which has a character named Sino, he has the power to control insects.";
        } else {
            return "I'm here to help with any questions you have!";
        }
    }

    // Typing effect function
    function typeWriterEffect(element, text, speed = 50) {
        let i = 0;
        const typingInterval = setInterval(() => {
            if (i < text.length) {
                element.innerHTML += `<span>${text[i]}</span>`;
                i++;
            } else {
                clearInterval(typingInterval); // Stop typing effect
            }
        }, speed);
    }

    // Function to toggle the chatbot visibility
    function toggleChatbot() {
        const chatbotCard = document.querySelector(".chatbot-card");
        chatbotCard.classList.toggle("show");
    }

</script>

</html>